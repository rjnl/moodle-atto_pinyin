YUI.add("moodle-atto_pinyin-button",function(e,t){var n="atto_pinyin",r={BUTTON:"atto_pinyin_character",CHARMAP:"atto_pinyin_selector"},i=[["&#257;","&#257;",!0],["&#225;","&#225;",!0],["&#462;","&#462;",!0],["&#224;","&#224;",!0],["&#275;","&#275;",!0],["&#233;","&#233;",!0],["&#283;","&#283;",!0],["&#232;","&#232;",!0],["&#299;","&#299;",!0],["&#237;","&#237;",!0],["&#464;","&#464;",!0],["&#236;","&#236;",!0],["&#333;","&#333;",!0],["&#243;","&#243;",!0],["&#466;","&#466;",!0],["&#242;","&#242;",!0],["&#363;","&#363;",!0],["&#250;","&#250;",!0],["&#468;","&#468;",!0],["&#249;","&#249;",!0],["&#470;","&#470;",!0],["&#472;","&#472;",!0],["&#474;","&#474;",!0],["&#476;","&#476;",!0],["&#252;","&#252;",!0]];e.namespace("M.atto_pinyin").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{_currentSelection:null,initializer:function(){this.addButton({icon:"icon",iconComponent:"atto_pinyin",callback:this._displayDialogue})},_displayDialogue:function(){this._currentSelection=this.get("host").getSelection();if(this._currentSelection===!1)return;var e=this.getDialogue({headerContent:M.util.get_string("insertcharacter",n),focusAfterHide:!0},!0);e.set("bodyContent",this._getDialogueContent()).show()},_getDialogueContent:function(){var t=e.Handlebars.compile('<div class="{{CSS.CHARMAP}}">{{#each CHARMAP}}{{#if this.[2]}}<button class="{{../../CSS.BUTTON}}" aria-label="{{get_string pinyin ../../component}}" data-character="{{this.[0]}}" >{{{this.[0]}}}</button>{{/if}}{{/each}}</div>'),s=e.Node.create(t({component:n,CSS:r,CHARMAP:i}));return s.delegate("click",this._insertChar,"."+r.BUTTON,this),s},_insertChar:function(e){var t=e.target.getData("character");this.getDialogue({focusAfterHide:null}).hide();var n=this.get("host");n.setSelection(this._currentSelection),n.insertContentAtFocusPoint(t),this.markUpdated()}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});
